<?php

namespace WP_PluginSafetyValidator\Modules;

use WP_PluginSafetyValidator\Traits\SchedulerTrait;

if (!defined('ABSPATH')) die('Access denied.');

class WordFenceVulnerabilityDataFeed
{
    use SchedulerTrait;

    /**
     * The singleton instance of the WordFenceVulnerabilityDataFeed class
     *
     * @var string
     */
    protected static $_instance;

    /**
     * Get the singleton instance of the WordFenceVulnerabilityDataFeed class
     *
     * @return WordFenceVulnerabilityDataFeed
     */
    public static function instance(): WordFenceVulnerabilityDataFeed
    {
        if (empty(self::$_instance)) {
            self::$_instance = new self();
        }

        return self::$_instance;
    }

    public function __construct()
    {
        $this->register_schedulers();
    }

    protected function get_schedules(): array
    {
        return [
            [
                'interval_slug' => 'every_15_seconds',
                'interval_args' => [
                    'interval' => 15,
                    'display' => __('Every 15 seconds', WP_PLUGIN_SAFETY_VALIDATOR_DOMAIN),
                ],
                'hook' => 'log_test',
                'callback' => 'log_test'
            ]
        ];
    }

    public function test_func()
    {
        return 'test success';
    }

    public function log_test()
    {
        error_log('LOG TEST1');
    }

} // end Class